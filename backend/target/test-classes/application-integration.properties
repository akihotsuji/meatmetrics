# 統合テスト環境用設定（Testcontainers + PostgreSQL + Flyway必須）
# spring.profiles.active=integration

# Testcontainers PostgreSQL設定
# 実際の接続情報はTestcontainersが動的に設定
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# JPA/Hibernate 統合テスト設定（PostgreSQL専用）
# DDLはFlywayマイグレーションで管理するため、noneに設定
spring.jpa.hibernate.ddl-auto=none
spring.jpa.open-in-view=false
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Flyway マイグレーション統合テスト設定（必須）
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=false
spring.flyway.validate-on-migrate=true
spring.flyway.out-of-order=false
spring.flyway.clean-disabled=false
spring.flyway.table=flyway_schema_history

# ログレベル（統合テスト用）
logging.level.org.springframework.security=warn
logging.level.org.springframework.web=info
logging.level.com.meatmetrics=debug
logging.level.org.hibernate.SQL=debug
logging.level.org.flywaydb=info
logging.level.org.testcontainers=info

# テスト実行時のポート（ランダム）
server.port=0

# JWT設定（テスト用固定値）
jwt.secret=integration-test-secret-key-for-testcontainers-postgresql-minimum-256-bits-required
jwt.expiration=3600000

# セキュリティ設定（統合テスト用）
spring.security.debug=false

# Testcontainers 設定（本格運用）
testcontainers.reuse.enable=true
# PostgreSQL専用コンテナ設定
testcontainers.postgresql.image=postgres:16
testcontainers.postgresql.database=meatmetrics_test
testcontainers.postgresql.username=meatmetrics
testcontainers.postgresql.password=meatmetrics123
